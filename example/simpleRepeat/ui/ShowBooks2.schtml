<html>
   <%!
      class Author {
         String name;
         Book[] books;

         Author(String name, Book[] books) {
            this.name = name;
            this.books = books;
            for (Book book:books)
               book.author = this;
         }
      }

      class Book {
         String title;
         Author author;

         Book(String title) {
            this.title = title;
         }
      }

      Author[] authors = new Author[]{new Author("Isaac Asimov", new Book[] {new Book("I Robot"), new Book("Foundation")}),
                                      new Author("Octavia Butler", new Book[] {new Book("Adulthood Rites")}),
                                      new Author("William Gibson", new Book[] {new Book("Neuromancer")})};
   %>
   <body>
      <!-- Use repeat to iterate over authors, setting the author variable to the current element.  This example shows that 'dl' by default
           has wrap=true.  This means only the body of the 'dl' tag is repeated.  With wrap=false, the default for most tags
           the repeat tag itself is repeated.  -->
      <dl id="showAuthors" repeat="= authors" repeatVarName="author">
         <dt><%= author.name %>:</dt>
         <dd>
            <span id="showBooks" repeat="= author.books" repeatVarName="book">
               <%= book.title + (repeatIndex == author.books.length-1 ? "" : ",") %>
            </span>
         </dd>
      </dl>
   </body>
</html>
